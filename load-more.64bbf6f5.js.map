{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,aAMA,MAAMC,EAAgB,IAAI,E,WAAAC,SACpBC,EAAOC,SAASC,cAAc,gBAC9BC,EAAUF,SAASC,cAAc,YACjCE,EAAcH,SAASC,cAAc,cAE3C,IAAIG,EAAW,IAAIC,EAAAC,GAAJ,CAAmB,aAAc,CAC9CC,aAAc,MACdC,aAAc,MAuChB,SAASC,GAAaC,KAAEA,EAAIC,UAAEA,IAC5B,IAAKD,EAAKE,OAKR,OAJAT,EAAYU,UAAUC,IAAI,YAC1BnB,EAAAoB,OAAOC,QACL,4EAIwB,IAAxBnB,EAAcoB,OAChBtB,EAAAoB,OAAOG,QAAQ,oBAAoBP,aAGrC,MAAMQ,EAAST,EACZU,KACC,EAACC,aACCA,EAAYC,cACZA,EAAaC,KACbA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,KAEO,0EAEEL,6CACsBD,WAAsBE,+GAGhBC,qDACAC,wDACGC,yDACCC,oCAK5CC,KAAK,IAKR,OAJA1B,EAAQ2B,mBAAmB,YAAaV,GACxCf,EAAS0B,UAiBX,WACE,MAAQC,OAAQC,GACd9B,EAAQ+B,kBAAkBC,wBAC5BC,OAAOC,SAAS,CACdC,IAAkB,IAAbL,EACLM,SAAU,U,CArBZC,GAEIrC,EAAQsC,SAAS5B,SAAWD,GAC9BR,EAAYU,UAAUC,IAAI,YAC1BnB,EAAAoB,OAAOC,QACL,oEAHJ,C,CASF,SAASyB,IACPvC,EAAQwC,UAAY,GACpBvC,EAAYU,UAAUC,IAAI,M,CAzF5BX,EAAYU,UAAUC,IAAI,OAI1Bf,EAAK4C,iBAAiB,UAGtB,SAAsBC,GACpBA,EAAIC,iBAEAD,EAAIE,cAAcC,SAASC,YAAYC,MAAMC,QAC/CT,IACA5C,EAAcsD,MAAQP,EAAIE,cAAcC,SAASC,YAAYC,MAAMC,OACnErD,EAAcuD,YACdvD,EAAcwD,eAAeC,MAAK,EAAC5C,KAAEA,EAAIC,UAAEA,MACzCR,EAAYU,UAAU0C,OAAO,OAC7B9C,EAAa,C,KAAEC,E,UAAMC,GAAY,MAGnC8B,IACA9C,EAAAoB,OAAOC,QAAQ,yB,IAfnBb,EAAYwC,iBAAiB,SAmB7B,WACE9C,EACGwD,eACAC,KAAK7C,GACL+C,OAAMC,IACLtD,EAAYU,UAAUC,IAAI,OAC1BnB,EAAAoB,OAAOC,QACL,6DACD,G","sources":["src/js/load-more.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport NewApiPixabay from './fetchPixabayAPI';\n\nconst newApiPixabay = new NewApiPixabay();\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nvar lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: `alt`,\n  captionDelay: 250,\n});\n\nloadMoreBtn.classList.add('btn');\n// loadMoreBtn.hidden = true;\n// loadMoreBtn.disabled = true;\n\nform.addEventListener('submit', onSubmitForm);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nfunction onSubmitForm(evt) {\n  evt.preventDefault();\n\n  if (evt.currentTarget.elements.searchQuery.value.trim()) {\n    clearGallery();\n    newApiPixabay.query = evt.currentTarget.elements.searchQuery.value.trim();\n    newApiPixabay.resetPage();\n    newApiPixabay.fetchPixabay().then(({ hits, totalHits }) => {\n      loadMoreBtn.classList.remove('btn');\n      renderMarkup({ hits, totalHits });\n    });\n  } else {\n    clearGallery();\n    Notify.failure('Enter data to search!');\n  }\n}\n\nfunction onLoadMore() {\n  newApiPixabay\n    .fetchPixabay()\n    .then(renderMarkup)\n    .catch(error => {\n      loadMoreBtn.classList.add('btn');\n      Notify.failure(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    });\n}\n\nfunction renderMarkup({ hits, totalHits }) {\n  if (!hits.length) {\n    loadMoreBtn.classList.add('btn');\n    Notify.failure(\n      'Sorry, there are no images matching your search query. Please try again.'\n    );\n    return;\n  }\n  if (newApiPixabay.pages === 2) {\n    Notify.success(`Hooray! We found ${totalHits} images.`);\n  }\n\n  const markup = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<div class=\"photo-card\">\n        <div class=\"wraper\">\n      <a href=\"${largeImageURL}\">\n        <img class=\"card-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n      </a></div>\n      <div class=\"info\">\n        <p class=\"info-item\"><b>Likes: </b>${likes}</p>\n        <p class=\"info-item\"><b>Views: </b>${views}</p>\n        <p class=\"info-item\"><b>Comments: </b>${comments}</p>\n        <p class=\"info-item\"><b>Downloads: </b>${downloads}</p>\n      </div>\n    </div>`;\n      }\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n  smoothScroll();\n\n  if (gallery.children.length === totalHits) {\n    loadMoreBtn.classList.add('btn');\n    Notify.failure(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n    return;\n  }\n}\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n  loadMoreBtn.classList.add('btn');\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } =\n    gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 0.31,\n    behavior: 'smooth',\n  });\n}\n"],"names":["$iQIUW","parcelRequire","$e13b538bfdccfbd0$var$newApiPixabay","default","$e13b538bfdccfbd0$var$form","document","querySelector","$e13b538bfdccfbd0$var$gallery","$e13b538bfdccfbd0$var$loadMoreBtn","$e13b538bfdccfbd0$var$lightbox","$parcel$interopDefault","$fZKcF","captionsData","captionDelay","$e13b538bfdccfbd0$var$renderMarkup","hits","totalHits","length","classList","add","Notify","failure","pages","success","markup","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","refresh","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","$e13b538bfdccfbd0$var$smoothScroll","children","$e13b538bfdccfbd0$var$clearGallery","innerHTML","addEventListener","evt","preventDefault","currentTarget","elements","searchQuery","value","trim","query","resetPage","fetchPixabay","then","remove","catch","error"],"version":3,"file":"load-more.64bbf6f5.js.map"}