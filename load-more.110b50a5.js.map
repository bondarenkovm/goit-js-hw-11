{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,aAMMC,EAAgB,IAAI,E,WAAAC,SACpBC,EAAOC,SAASC,cAAc,gBAC9BC,EAAUF,SAASC,cAAc,YACjCE,EAAcH,SAASC,cAAc,cAEvCG,EAAW,IAAIC,EAAAC,GAAJ,CAAmB,aAAc,CAC9CC,aAAe,MACfC,aAAc,MAuChB,SAASC,EAAaC,G,IAAEC,EAAFD,EAAEC,KAAMC,EAARF,EAAQE,UAC5B,IAAKD,EAAKE,OAKR,OAJAV,EAAYW,UAAUC,IAAI,YAC1BpB,EAAAqB,OAAOC,QACL,4EAIwB,IAAxBpB,EAAcqB,OAChBvB,EAAAqB,OAAOG,QAAQ,oBAA8BC,OAAVR,EAAU,aAG/C,IA6CQS,EA7CFC,EAASX,EACZY,KACC,SAAAC,G,IACEC,EAAYD,EAAZC,aACAC,EAAaF,EAAbE,cACAC,EAAIH,EAAJG,KACAC,EAAKJ,EAALI,MACAC,EAAKL,EAALK,MACAC,EAAQN,EAARM,SACAC,EAASP,EAATO,UAEA,MAAO,0EAGwBX,OADtBM,EAAc,6CAC8BN,OAAtBK,EAAa,WAGPL,OAHgBO,EAAK,+GAIrBP,OADAQ,EAAM,qDAEHR,OADHS,EAAM,wDAEFT,OADDU,EAAS,yDACEV,OAAVW,EAAU,iC,IAKtDC,KAAK,IAKR,OAJA9B,EAAQ+B,mBAAmB,YAAaX,GACxClB,EAAS8B,UAkBDb,EACNnB,EAAQiC,kBAAkBC,wBADpBC,OAERC,OAAOC,SAAS,CACdC,IAAkB,IAAbnB,EACLoB,SAAU,WAnBRvC,EAAQwC,SAAS7B,SAAWD,GAC9BT,EAAYW,UAAUC,IAAI,YAC1BpB,EAAAqB,OAAOC,QACL,oEAHJ,C,CASF,SAAS0B,IACPzC,EAAQ0C,UAAY,GACpBzC,EAAYW,UAAUC,IAAI,M,CAzF5BZ,EAAYW,UAAUC,IAAI,OAI1BhB,EAAK8C,iBAAiB,UAGtB,SAAsBC,GACpBA,EAAIC,iBAEAD,EAAIE,cAAcC,SAASC,YAAYC,MAAMC,QAC/CT,IACA9C,EAAcwD,MAAQP,EAAIE,cAAcC,SAASC,YAAYC,MAAMC,OACnEvD,EAAcyD,YACdzD,EAAc0D,eAAeC,MAAK,SAAAhC,G,IAAGb,EAAIa,EAAJb,KAAMC,EAASY,EAATZ,UACzCT,EAAYW,UAAU2C,OAAO,OAC7BhD,EAAa,CAAEE,OAAMC,a,MAGvB+B,IACAhD,EAAAqB,OAAOC,QAAQ,yB,IAfnBd,EAAY0C,iBAAiB,SAmB7B,WACEhD,EACG0D,eACAC,KAAK/C,GACLiD,OAAM,SAAAC,GACLxD,EAAYW,UAAUC,IAAI,OAC1BpB,EAAAqB,OAAOC,QACL,6D","sources":["src/js/load-more.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport NewApiPixabay from './fetchPixabayAPI';\n\nconst newApiPixabay = new NewApiPixabay();\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nvar lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: `alt`,\n  captionDelay: 250,\n});\n\nloadMoreBtn.classList.add('btn');\n// loadMoreBtn.hidden = true;\n// loadMoreBtn.disabled = true;\n\nform.addEventListener('submit', onSubmitForm);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nfunction onSubmitForm(evt) {\n  evt.preventDefault();\n\n  if (evt.currentTarget.elements.searchQuery.value.trim()) {\n    clearGallery();\n    newApiPixabay.query = evt.currentTarget.elements.searchQuery.value.trim();\n    newApiPixabay.resetPage();\n    newApiPixabay.fetchPixabay().then(({ hits, totalHits }) => {\n      loadMoreBtn.classList.remove('btn');\n      renderMarkup({ hits, totalHits });\n    });\n  } else {\n    clearGallery();\n    Notify.failure('Enter data to search!');\n  }\n}\n\nfunction onLoadMore() {\n  newApiPixabay\n    .fetchPixabay()\n    .then(renderMarkup)\n    .catch(error => {\n      loadMoreBtn.classList.add('btn');\n      Notify.failure(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    });\n}\n\nfunction renderMarkup({ hits, totalHits }) {\n  if (!hits.length) {\n    loadMoreBtn.classList.add('btn');\n    Notify.failure(\n      'Sorry, there are no images matching your search query. Please try again.'\n    );\n    return;\n  }\n  if (newApiPixabay.pages === 2) {\n    Notify.success(`Hooray! We found ${totalHits} images.`);\n  }\n\n  const markup = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<div class=\"photo-card\">\n        <div class=\"wraper\">\n      <a href=\"${largeImageURL}\">\n        <img class=\"card-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n      </a></div>\n      <div class=\"info\">\n        <p class=\"info-item\"><b>Likes: </b>${likes}</p>\n        <p class=\"info-item\"><b>Views: </b>${views}</p>\n        <p class=\"info-item\"><b>Comments: </b>${comments}</p>\n        <p class=\"info-item\"><b>Downloads: </b>${downloads}</p>\n      </div>\n    </div>`;\n      }\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n  smoothScroll();\n\n  if (gallery.children.length === totalHits) {\n    loadMoreBtn.classList.add('btn');\n    Notify.failure(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n    return;\n  }\n}\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n  loadMoreBtn.classList.add('btn');\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } =\n    gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 0.31,\n    behavior: 'smooth',\n  });\n}\n"],"names":["$h6c0i","parcelRequire","$59bb3250e981eb05$var$newApiPixabay","default","$59bb3250e981eb05$var$form","document","querySelector","$59bb3250e981eb05$var$gallery","$59bb3250e981eb05$var$loadMoreBtn","$59bb3250e981eb05$var$lightbox","$parcel$interopDefault","$5IjG7","captionsData","captionDelay","$59bb3250e981eb05$var$renderMarkup","param1","hits","totalHits","length","classList","add","Notify","failure","pages","success","concat","cardHeight","markup","map","param","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","insertAdjacentHTML","refresh","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","children","$59bb3250e981eb05$var$clearGallery","innerHTML","addEventListener","evt","preventDefault","currentTarget","elements","searchQuery","value","trim","query","resetPage","fetchPixabay","then","remove","catch","error"],"version":3,"file":"load-more.110b50a5.js.map"}